{"version":3,"sources":["../../src/models/chat.model.ts"],"sourcesContent":["import { Sequelize, DataTypes, Model, Optional, BelongsTo } from 'sequelize';\nimport { Chat } from '@/interfaces/chat.interface';\nimport { UserModel } from './user.model';\n\nexport type ChatCreationAttributes = Optional<Chat, 'id' | 'name' | 'is_group' | 'last_message' | 'admin_id' | 'receiver_id' | 'inbox_hash'>;\n\nexport class ChatModel extends Model<Chat, ChatCreationAttributes> implements Chat {\n  public id: number;\n  public name: string;\n  public is_group: boolean;\n  public last_message?: string;\n  public admin_id: number;\n  public receiver_id: number;\n  public inbox_hash: string;\n\n  public readonly createdAt!: Date;\n  public readonly updatedAt!: Date;\n}\n\nexport default function (sequelize: Sequelize): typeof ChatModel {\n  ChatModel.init(\n    {\n      id: {\n        autoIncrement: true,\n        primaryKey: true,\n        type: DataTypes.INTEGER,\n      },\n      name: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n      is_group: {\n        allowNull: false,\n        type: DataTypes.BOOLEAN,\n      },\n      last_message: {\n        allowNull: true,\n        type: DataTypes.STRING,\n      },\n      admin_id: {\n        allowNull: false,\n        type: DataTypes.INTEGER,\n      },\n      receiver_id: {\n        allowNull: false,\n        type: DataTypes.INTEGER,\n      },\n      inbox_hash: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n    },\n\n    {\n      tableName: 'chats',\n      sequelize,\n    },\n  );\n\n  ChatModel.belongsTo(UserModel, {\n    foreignKey: 'receiver_id',\n    as: 'receiver',\n  });\n\n  ChatModel.belongsTo(UserModel, {\n    foreignKey: 'admin_id',\n    as: 'owner',\n  });\n\n  return ChatModel;\n}\n"],"names":["ChatModel","Model","id","name","is_group","last_message","admin_id","receiver_id","inbox_hash","createdAt","updatedAt","sequelize","init","autoIncrement","primaryKey","type","DataTypes","INTEGER","allowNull","STRING","BOOLEAN","tableName","belongsTo","UserModel","foreignKey","as"],"mappings":";;;;;;;;;;;IAMaA,SAAS;eAATA;;IAab,OAmDC;eAnDD;;;2BAnBiE;2BAEvC;;;;;;;;;;;;;;AAInB,IAAA,AAAMA,YAAN,MAAMA,kBAAkBC,gBAAK;;;QAClC,uBAAOC,MAAP,KAAA;QACA,uBAAOC,QAAP,KAAA;QACA,uBAAOC,YAAP,KAAA;QACA,uBAAOC,gBAAP,KAAA;QACA,uBAAOC,YAAP,KAAA;QACA,uBAAOC,eAAP,KAAA;QACA,uBAAOC,cAAP,KAAA;QAEA,uBAAgBC,aAAhB,KAAA;QACA,uBAAgBC,aAAhB,KAAA;;AACF;AAEe,SAAf,SAAyBC,SAAoB;IAC3CX,UAAUY,IAAI,CACZ;QACEV,IAAI;YACFW,eAAe;YACfC,YAAY;YACZC,MAAMC,oBAAS,CAACC,OAAO;QACzB;QACAd,MAAM;YACJe,WAAW;YACXH,MAAMC,oBAAS,CAACG,MAAM;QACxB;QACAf,UAAU;YACRc,WAAW;YACXH,MAAMC,oBAAS,CAACI,OAAO;QACzB;QACAf,cAAc;YACZa,WAAW;YACXH,MAAMC,oBAAS,CAACG,MAAM;QACxB;QACAb,UAAU;YACRY,WAAW;YACXH,MAAMC,oBAAS,CAACC,OAAO;QACzB;QACAV,aAAa;YACXW,WAAW;YACXH,MAAMC,oBAAS,CAACC,OAAO;QACzB;QACAT,YAAY;YACVU,WAAW;YACXH,MAAMC,oBAAS,CAACG,MAAM;QACxB;IACF,GAEA;QACEE,WAAW;QACXV;IACF;IAGFX,UAAUsB,SAAS,CAACC,oBAAS,EAAE;QAC7BC,YAAY;QACZC,IAAI;IACN;IAEAzB,UAAUsB,SAAS,CAACC,oBAAS,EAAE;QAC7BC,YAAY;QACZC,IAAI;IACN;IAEA,OAAOzB;AACT"}